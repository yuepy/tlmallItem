/*<ORACLECOPYRIGHT>
* Copyright (C) 1994-2015 Oracle and/or its affiliates. All rights reserved.
* Oracle and Java are registered trademarks of Oracle and/or its affiliates.
* Other names may be trademarks of their respective owners.
* UNIX is a registered trademark of The Open Group.
*
* This software and related documentation are provided under a license agreement
* containing restrictions on use and disclosure and are protected by intellectual property laws.
* Except as expressly permitted in your license agreement or allowed by law, you may not use, copy,
* reproduce, translate, broadcast, modify, license, transmit, distribute, exhibit, perform, publish,
* or display any part, in any form, or by any means. Reverse engineering, disassembly,
* or decompilation of this software, unless required by law for interoperability, is prohibited.
*
* The information contained herein is subject to change without notice and is not warranted to be error-free.
* If you find any errors, please report them to us in writing.
*
* U.S. GOVERNMENT RIGHTS Programs, software, databases, and related documentation and technical data delivered to U.S.
* Government customers are "commercial computer software" or "commercial technical data" pursuant to the applicable
* Federal Acquisition Regulation and agency-specific supplemental regulations.
* As such, the use, duplication, disclosure, modification, and adaptation shall be subject to the restrictions and
* license terms set forth in the applicable Government contract, and, to the extent applicable by the terms of the
* Government contract, the additional rights set forth in FAR 52.227-19, Commercial Computer Software License
* (December 2007). Oracle America, Inc., 500 Oracle Parkway, Redwood City, CA 94065.
*
* This software or hardware is developed for general use in a variety of information management applications.
* It is not developed or intended for use in any inherently dangerous applications, including applications that
* may create a risk of personal injury. If you use this software or hardware in dangerous applications,
* then you shall be responsible to take all appropriate fail-safe, backup, redundancy,
* and other measures to ensure its safe use. Oracle Corporation and its affiliates disclaim any liability for any
* damages caused by use of this software or hardware in dangerous applications.
*
* This software or hardware and documentation may provide access to or information on content,
* products, and services from third parties. Oracle Corporation and its affiliates are not responsible for and
* expressly disclaim all warranties of any kind with respect to third-party content, products, and services.
* Oracle Corporation and its affiliates will not be responsible for any loss, costs,
* or damages incurred due to your access to or use of third-party content, products, or services.
</ORACLECOPYRIGHT>*/
/* 8.1.1.14SIA[23044]PATCHSET99 */
if(typeof(SiebelApp.S_App.Currency)==="undefined"){SiebelJS.Namespace("SiebelApp.S_App.Currency");SiebelApp.S_App.Currency=(function(){var a=SiebelJS.Dependency("SiebelApp.Utils");var g=SiebelJS.Dependency("SiebelApp.Constants");var f=207;var e=208;var c=209;function b(){var z=null;var x;var I;var E;var K;var H;var C;var n;var G;var l;var w=false;var v;var O;var D;var B;var L;var P;var F;var k;var y;var i;var J;var N;var u;var j;var r=true;var q;var A;var p;var M=false;var s;var m;var t=false;var o;this.isShowingPick=function(){return M};this.SetShowingPick=function(Q){M=Q};this.GetEDateFieldName=function(){return l};this.SetEDateFieldName=function(Q){l=Q};this.GetCCodeMethod=function(){return H};this.SetCCodeMethod=function(Q){H=Q};this.GetCCodeFieldName=function(){return K};this.SetCCodeFieldName=function(Q){K=Q};this.GetPopupBM=function(){return i};this.SetPopupBM=function(Q){i=Q};this.GetRowID=function(){return y};this.SetRowID=function(Q){y=Q};this.GetCurrentView=function(){return F};this.SetCurrentView=function(Q){F=Q};this.GetCurrencySign=function(){return z};this.SetCurrencySign=function(Q){z=Q};this.SetEDateLabel=function(Q){x=Q};this.GetEDateLabel=function(){return x};this.SetAmountLabel=function(Q){I=Q};this.GetAmountLabel=function(){return I};this.SetCCodeLabel=function(Q){E=Q};this.GetCCodeLabel=function(){return E};this.CanDisplayDate=function(){return w};this.HideExchDate=function(){w=true};this.GetCurrencyApplet=function(){return k};this.SetCurrencyApplet=function(Q){k=Q};this.SetCurrencyControl=function(Q){J=Q};this.GetCurrencyControl=function(){return J};this.SetDateControlName=function(Q){N=Q};this.GetDateControlName=function(){return N};this.SetCalculatorControlName=function(Q){u=Q};this.GetCalculatorControlName=function(){return u};this.SetCurcyCode=function(Q){C=Q};this.GetCurcyCode=function(){return C};this.SetExchDate=function(Q){v=Q};this.SetExchFormat=function(Q){O=Q};this.GetExchFormat=function(Q){return O};this.SetExchDateField=function(Q){D=Q};this.GetExchDateField=function(){return D};this.GetAmountValue=function(){return B};this.SetAmountValue=function(Q){B=Q};this.SetAmountFormat=function(Q){o=Q};this.GetAmountFormat=function(Q){return o};this.GetExchDate=function(){return v};this.SetEDateReadOnly=function(Q){G=Q};this.IsDateReadOnly=function(){return G};this.SetCCodeReadOnly=function(Q){n=Q};this.IsCCodeReadOnly=function(){return n};this.SetAmountReadOnly=function(Q){L=Q};this.IsAmountReadOnly=function(){return L};this.SaveCurrentValues=function(){q=this.GetCurcyCode();A=this.GetExchDate();p=this.GetAmountValue()};this.GetOrigCCode=function(){return q};this.GetOrigEDate=function(){return A};this.GetOrigAmount=function(){return p};this.SetSourceField=function(Q){s=Q};this.GetSourceField=function(){return s};this.SetQTPInfo=function(Q){m=Q};this.GetQTPInfo=function(){return m};this.SetQueryMode=function(Q){t=Q};this.GetQueryMode=function(){return t};SiebelApp.S_App.ErrorObject.DecorateErrorCapability(this)}b.prototype.GetCurrencyCalInfo=function(){var i=[];i.push(this.GetCurrencyControl());i.push(this.GetCCodeLabel());i.push(this.GetCurcyCode());i.push(this.GetDateControlName());i.push(this.GetEDateLabel());i.push(this.GetExchDate());i.push(this.GetCalculatorControlName());i.push(this.GetAmountLabel());i.push(this.GetAmountValue());i.push(this.CanDisplayDate());i.push(this.IsCCodeReadOnly());i.push(this.IsDateReadOnly());i.push(this.IsAmountReadOnly());i.push(this.GetSourceField());i.push(this.GetQTPInfo());i.push(this.GetExchFormat());i.push(this.GetExchDateField());return i};b.prototype.UpdateCurrencyInfo=function(i,j){SiebelApp.S_App.GetPopupPM().SetProperty("isCurrencyOpen",true);this.Update(i,j);if(i===2){return}return};b.prototype.Update=function(i,j){switch(i){case 0:this.Reconfig(j);break;case 1:this.UpdateCCode(j);break;default:break}this.SetShowingPick(false);this.SaveCurrentValues();return};b.prototype.UpdateCCode=function(l){var k=6;var i=[];CCFMiscUtil_StringToArray(l,i);var n=this.GetAmountValue(),m=this.GetCurrencySign();if(n.indexOf(m)!==-1){n=n.replace(m,"").trim()}this.SetCurcyCode(i[k-1]);this.SetCurrencySign(i[k]);this.SetAmount(n,true);$("[name="+this.GetSourceField()+"]").val(this.GetAmountValue());this.PostChanges()};b.prototype.PostChanges=function(){if(!(this.isValuesChanged())){return}var i=CCFMiscUtil_CreatePropSet();i=this.SetDefaultParams();i=this.SetValueParams(i);var j=CCFMiscUtil_CreatePropSet();i.SetProperty("SWEMethod","PostChanges");SiebelApp.S_App.CallServer(i,j,false);this.SaveCurrentValues()};b.prototype.WriteRecord=function(){if(!(this.isValuesChanged())){return}var k=CCFMiscUtil_CreatePropSet();var l=CCFMiscUtil_CreatePropSet();k=this.SetDefaultParams();k=this.SetValueParams(k);k.SetProperty(g.get("SWE_METHOD_STR"),"WriteRecord");var j=this.GetQueryMode();if(j){var i={async:false,cb:d,opdecode:false,scope:this};SiebelApp.S_App.CallServer(k,l,true,i)}else{SiebelApp.S_App.CallServer(k,l,true)}this.SaveCurrentValues()};var d=function(i){this.ClearErrorMsg();this.CloseServerApplet()};b.prototype.CloseServerApplet=function(){var i=this.GetQueryMode();if(!i&&this.isValuesChanged()){return}var j=CCFMiscUtil_CreatePropSet();var k=CCFMiscUtil_CreatePropSet();j=this.SetDefaultParams();j=this.SetValueParams(j);j.SetProperty(g.get("SWE_METHOD_STR"),"CloseApplet");SiebelApp.S_App.CallServer(j,k,true)};b.prototype.SetValueParams=function(o){if($("#"+this.GetCCodeFieldName()).length>0){var j=$("#"+this.GetCCodeFieldName()).val();var l=$("#"+this.GetEDateFieldName()).val();var n=$("#"+this.GetCalculatorControlName()).val();this.SetCurcyCode(j);this.SetExchDate(l);this.SetAmount(n,true)}o.SetProperty(this.GetCCodeFieldName(),this.GetCurcyCode());if(!(this.CanDisplayDate())){o.SetProperty(this.GetEDateFieldName(),this.GetExchDate())}var k=this.GetAmountValue();var m=0;while(isNaN(k.charAt(m))){m++}k=k.substring(m);o.SetProperty(this.GetCalculatorControlName(),k);return o};b.prototype.Reconfig=function(C){var D=[];CCFMiscUtil_StringToArray(C,D);var w=0;var t=D[w++];var u=D[w++];var A=D[w++];var l=D[w++];var x=D[w++];var q=D[w++];var k=D[w++];var n=D[w++];var z=D[w++];var r=D[w++];var y=(D.length)-1;var B;var m;this.SetCurrencySign(D[y]);this.SetCurrentView(u);this.SetCurrencyApplet(l);this.SetRowID(q);this.SetPopupBM(k);this.SetSourceField(x);var p;var o=-1;var s;for(var v=w;v<y;v++){s=D[v].split("|");if(s.length>0){switch(Number(s[0])){case 1:this.ReinitControl(e,s);this.SetCurrencyControl(s[4]);break;case 2:o=v;this.ReinitControl(c,s);this.SetDateControlName(s[4]);break;case 3:p=v;this.SetCalculatorControlName(s[4]);break;case 4:B=s[1];break;case 5:m=s[1];break;case 6:this.SetCCodeLabel(s[1]);break;case 7:this.SetEDateLabel(s[1]);break;case 8:this.SetAmountLabel(s[1]);break;case 9:h.call(this,s[1]);break;default:break}}}if(p>-1){s=D[p].split("|");this.ReinitControl(f,s)}if(o<0){this.HideExchDate()}return};function h(j){var i=CCFMiscUtil_CreatePropSet();i.DecodeFromString(j);this.SetQTPInfo(i)}b.prototype.ReinitControl=function(l,s){var n=1;
var r=s[n++];var m=s[n++];var p=s[n++];var o=s[n++];var i=s[n++];var q=s[n++];var t=s[n++];var k=false;if(m==="false"){k=true}if(l===e){this.SetCurcyCode(r);this.SetCCodeFieldName(o);this.SetCCodeMethod(i);this.SetCCodeReadOnly(k)}else{if(l===c){this.SetExchDate(r);this.SetExchFormat(q);this.SetExchDateField(t);this.SetEDateReadOnly(k);if(p===true){this.HideExchDate()}this.SetEDateFieldName(o)}else{if(l===f){this.SetAmountFormat(q);this.SetAmount(r,false);this.SetAmountReadOnly(k);this.SetCalculatorControlName(o)}}}return};b.prototype.SetDefaultParams=function(){var i=CCFMiscUtil_CreatePropSet();i.SetProperty("SWECmd","InvokeMethod");i.SetProperty("SWEView",this.GetCurrentView());i.SetProperty(g.get("SWE_APPLET_STR"),this.GetCurrencyApplet());i.SetProperty("SWERowId",this.GetRowID());i.SetProperty("SWERowIds:SWERowId0",this.GetRowID());i.SetProperty("SWEReqRowId","true");i.SetProperty("SWENeedContext","false");i.SetProperty("SWEDIC","true");i.SetProperty("SWEP",this.GetPopupBM());i.SetProperty("SWESP","true");i.SetProperty("SWEActiveApplet","");i.SetProperty("SWEActiveView",this.GetCurrentView());return i};b.prototype.ShowPickPopup=function(i){var j=CCFMiscUtil_CreatePropSet();var k=CCFMiscUtil_CreatePropSet();j=this.SetDefaultParams();j.SetProperty("SWEMethod",this.GetCCodeMethod());j.SetProperty("SWEField",this.GetCCodeFieldName());j.SetProperty(g.get("SWE_METHOD_STR"),"EditField");SiebelApp.S_App.CallServer(j,k,true);this.SetShowingPick(true)};b.prototype.isValuesChanged=function(){return((this.GetOrigCCode()!==this.GetCurcyCode())||(this.GetOrigEDate()!==this.GetExchDate())||(this.GetOrigAmount()!==this.GetAmountValue()))};b.prototype.NotifyClosePopup=function(){this.GetNewValues();if(!this.isShowingPick()){if(this.isValuesChanged()){this.WriteRecord()}else{this.CloseServerApplet()}}};b.prototype.GetNewValues=function(){if($("#"+this.GetCCodeFieldName()).length===1){var i=$("#"+this.GetCCodeFieldName()).val();var j=$("#"+this.GetEDateFieldName()).val();var k=$("#"+this.GetCalculatorControlName()).val();this.SetCurcyCode(i);this.SetExchDate(j);this.SetAmount(k,true)}};b.prototype.SetAmount=function(k,j){var i;if(j){i=SiebelApp.S_App.LocaleObject.GetStringFromCurrency(this.GetCurcyCode(),this.GetExchDate(),k,this.GetAmountFormat())}else{i=k}k=SiebelApp.S_App.LocaleObject.GetCurrencyFromString(this.GetCurcyCode(),this.GetExchDate(),i,this.GetAmountFormat());this.SetAmountValue(k)};b.prototype.PostChangesOnBlur=function(){var i=$("#"+this.GetCalculatorControlName()).val();this.SetAmount(i,true)};return b}())};