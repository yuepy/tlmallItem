/*<ORACLECOPYRIGHT>
* Copyright (C) 1994-2015 Oracle and/or its affiliates. All rights reserved.
* Oracle and Java are registered trademarks of Oracle and/or its affiliates.
* Other names may be trademarks of their respective owners.
* UNIX is a registered trademark of The Open Group.
*
* This software and related documentation are provided under a license agreement
* containing restrictions on use and disclosure and are protected by intellectual property laws.
* Except as expressly permitted in your license agreement or allowed by law, you may not use, copy,
* reproduce, translate, broadcast, modify, license, transmit, distribute, exhibit, perform, publish,
* or display any part, in any form, or by any means. Reverse engineering, disassembly,
* or decompilation of this software, unless required by law for interoperability, is prohibited.
*
* The information contained herein is subject to change without notice and is not warranted to be error-free.
* If you find any errors, please report them to us in writing.
*
* U.S. GOVERNMENT RIGHTS Programs, software, databases, and related documentation and technical data delivered to U.S.
* Government customers are "commercial computer software" or "commercial technical data" pursuant to the applicable
* Federal Acquisition Regulation and agency-specific supplemental regulations.
* As such, the use, duplication, disclosure, modification, and adaptation shall be subject to the restrictions and
* license terms set forth in the applicable Government contract, and, to the extent applicable by the terms of the
* Government contract, the additional rights set forth in FAR 52.227-19, Commercial Computer Software License
* (December 2007). Oracle America, Inc., 500 Oracle Parkway, Redwood City, CA 94065.
*
* This software or hardware is developed for general use in a variety of information management applications.
* It is not developed or intended for use in any inherently dangerous applications, including applications that
* may create a risk of personal injury. If you use this software or hardware in dangerous applications,
* then you shall be responsible to take all appropriate fail-safe, backup, redundancy,
* and other measures to ensure its safe use. Oracle Corporation and its affiliates disclaim any liability for any
* damages caused by use of this software or hardware in dangerous applications.
*
* This software or hardware and documentation may provide access to or information on content,
* products, and services from third parties. Oracle Corporation and its affiliates are not responsible for and
* expressly disclaim all warranties of any kind with respect to third-party content, products, and services.
* Oracle Corporation and its affiliates will not be responsible for any loss, costs,
* or damages incurred due to your access to or use of third-party content, products, or services.
</ORACLECOPYRIGHT>*/
/* 8.1.1.14SIA[23044]PATCHSET99 */
if(typeof(SiebelAppFacade.TaskAssistPlayerPM)==="undefined"){SiebelJS.Namespace("SiebelAppFacade.TaskAssistPlayerPM");define("siebel/taskassistplayerpmodel",["siebel/pmodel"],function(){SiebelAppFacade.TaskAssistPlayerPM=(function(){var i=SiebelJS.Dependency("SiebelApp.Constants");var n=SiebelJS.Dependency("SiebelApp.Utils");function p(){SiebelAppFacade.TaskAssistPlayerPM.superclass.constructor.call(this,{GetName:function(){return"TaskAssistantPlayer"}})}SiebelJS.Extend(p,SiebelAppFacade.BasePM);p.prototype.Init=function(){this.AddProperty("Show",false);this.AddProperty("PlayerMode",null);this.AddProperty("TaskListName","");this.AddProperty("LocaleStringMap",{});this.AddProperty("Tasks",[]);this.AddProperty("TaskMap",{});this.AddProperty("TaskDetail",{});this.AddProperty("TaskAdditionalItemMap",{});this.AddProperty("ReturnLinkName","");this.AddProperty("ClearCurrentStepControlsHighlight",false);this.AddProperty("CurrentStepId","");this.AddProperty("HighlightStep","");this.AddProperty("TaskListContainer","taskListPane");this.AddProperty("TaskContainer","taskPlayerMain");this.AddMethod("InvokeServiceMethod",function(u,w,y,z){if(!z){z=i.get("NAME_TASKASSISTUISVC")}var t=SiebelApp.S_App.GetService(z);if(t){if(!w){w=CCFMiscUtil_CreatePropSet()}var x=t.InvokeMethod(u,w);var v=x.GetProperty(i.get("SWE_RPC_PROP_RETURN_STATUS"));if(v!==i.get("SWE_RPC_PROP_STATUS_ERROR")&&!n.IsEmpty(v)){if(y){var A=x.GetChildByType("ResultSet");if(A){y.DeepCopy(A)}}return true}}return false});this.AddMethod("LoadAllData",l);this.AddMethod("LaunchTaskFromView",h);this.AddMethod("Hide",k);this.AttachEventHandler(i.get("TASKASSIST_PANE_CLOSE"),j);this.AttachEventHandler("LaunchTaskFromList",r);this.AttachEventHandler("LaunchSubTaskFromList",m);this.AttachEventHandler("ExpandBranch",s);this.AttachEventHandler("ClearBranchAfter",a);this.AttachEventHandler("SetCurrentStepId",c);this.AttachEventHandler(i.get("TASKASSIST_PANE_DONE"),e)};p.prototype.Setup=function(t){t.SetProperty("SWE_OUI_RENDERER","TaskAssistPlayerPR");SiebelAppFacade.TaskAssistPlayerPM.superclass.Setup.call(this,t);g.call(this,t)};p.prototype.HandleNotify=function(t){g.call(this,t)};p.prototype.Show=function(){SiebelAppFacade.TaskAssistPlayerPM.superclass.Show.call(this);if(!this.Get("Show")){this.SetProperty("Show",true)}};function k(){if(this.Get("Show")){this.SetProperty("Show",false)}}function g(t){if(!t){return}var u=t.GetProperty("Type");switch(u){case"TASK_LIST_ALL":d.call(this,t);break;case"TASK_PLAYER_ALL":f.call(this,t);break;case"TASK_DETAIL_UPDATE":b.call(this,t);break;default:break}}function d(y){var C=this.Get("TaskMap");var w=this.Get("Tasks");var z=y.GetProperty("PlayerMode");this.SetProperty("PlayerMode",z);var x=y.GetProperty("ClearTaskList");if(x==="TRUE"){C={};w=[]}this.SetProperty("TaskListName",y.GetProperty("TaskListName"));var t=y.GetProperty("LocaleStrings");q.call(this,t);var B=y.EnumChildren(true);if(B){do{var u={};u.taskId=B.GetProperty("Buf");u.taskRowId=B.GetProperty("TaskId");u.taskName=B.GetProperty("TaskName");u.viewName=B.GetProperty("ViewName");w.push(u);C[u.taskRowId]=u;var v={};var A=B.GetChildByType("SubTask");if(A){v.taskId=A.GetProperty("Buf");v.taskRowId=A.GetProperty("TaskId");v.taskName=A.GetProperty("TaskName");u.subTask=v}}while((B=y.EnumChildren(false)))}this.SetProperty("Tasks",w);this.SetProperty("TaskMap",C)}function b(t){this.SetProperty("ReturnLinkName",t.GetProperty("ReturnLinkName"));this.SetProperty("HighlightStep",t.GetProperty("HighlightStep"))}function q(y){var u=this.Get("LocaleStringMap");var w=y.split("|");for(var x=0,t=w.length;x<t;x++){var v=w[x].split("@");u[v[0]]=v[1]}this.SetProperty("LocaleStringMap",u)}function o(t){if(t){var u=t.GetProperty("ErrString");if(u){n.Alert(u);return true}else{return false}}return false}function j(){this.SetProperty("Show",false);var t=CCFMiscUtil_CreatePropSet();t.SetProperty(i.get("SWE_VIEW_ID_STR"),i.get("TASKASSIST_PANE_VIEWNAME"));this.ExecuteMethod("InvokeServiceMethod",i.get("TASKASSISTUISVC_METHOD_TOGGLEIHELP"),t);SiebelApp.S_App.UnregisterExtObject("TaskAssistant")}function h(w){var t=CCFMiscUtil_CreatePropSet();var u=CCFMiscUtil_CreatePropSet();this.ExecuteMethod("InvokeServiceMethod","IsTaskAssistantOn",t,u);var v=u.GetProperty("IsTaskAssistantOn");if(v==="0"){t.SetProperty(i.get("SWE_VIEW_ID_STR"),i.get("TASKASSIST_PANE_VIEWNAME"));this.ExecuteMethod("InvokeServiceMethod",i.get("TASKASSISTUISVC_METHOD_TOGGLEIHELP"),t)}r.call(this,w)}function r(v){this.SetProperty("ClearCurrentStepControlsHighlight",true);var t=CCFMiscUtil_CreatePropSet();var u=CCFMiscUtil_CreatePropSet();t.SetProperty("Task Id",v);if(this.ExecuteMethod("InvokeServiceMethod","LaunchTaskFromList",t,u)){f.call(this,u)}}function f(F){var M=this.Get("TaskDetail");var D=F.GetProperty("ClearTask");if(D==="TRUE"){M={};this.SetProperty("TaskAdditionalItemMap",{})}this.SetProperty("TaskListName",F.GetProperty("TaskListName"));M.displayName=F.GetProperty("TaskDisplayName");M.taskId=F.GetProperty("TaskId");this.SetProperty("CurrentStepId","1");this.SetProperty("ReturnLinkName",F.GetProperty("ReturnLinkName"));var H=F.GetProperty("PlayerMode");this.SetProperty("PlayerMode",H);var w=F.GetProperty("LocaleStrings");q.call(this,w);M.branchStepIdArray=[];M.stepArray=[];var A=F.GetProperty("ClearStepsAfter");if(A){M.hasDoneStep=false}else{if(F.GetProperty("HasDoneStep")==="TRUE"){M.hasDoneStep=true}}var J=F.GetChildByType("Step",true);var v=J.EnumChildren(true);if(v){do{var y={};y.number=v.GetProperty("StepNum");if(A&&y.number>A){continue}y.displayText=v.GetProperty("DisplayText");y.isRequired=v.GetProperty("IsRequired");y.viewName=v.GetProperty("ViewName");y.sectionLabel=v.GetProperty("SectionLabel");y.isExpanded=v.GetProperty("StepState");y.highlightData=v.GetProperty("Highlights");M.stepArray.push(y);var B=v.EnumChildren(true);if(B){var z=[];do{var L={};L.subStepId=B.GetProperty("Buf");L.displayText=B.GetProperty("DisplayText");L.isRequired=B.GetProperty("IsRequired");z.push(L)}while((B=v.EnumChildren(false)));y.subStepArray=z}}while((v=J.EnumChildren(false)))}var u=F.GetChildByType("ShowMeMore");if(u){M.showMeObj={displayText:u.GetProperty("DisplayText"),location:u.GetProperty("Location")}}var t={};var E=F.GetProperty("AdditionalHelpHeading");if(E){var K=F.GetChildByType("AdditionalHelpItem",true);if(K){var x=K.EnumChildren(true);if(x){var I=[];do{var G={};G.name=x.GetProperty("Name");G.rowId=x.GetProperty("RowId");I.push(G);t[G.rowId]=G}while((x=K.EnumChildren(false)));M.addItemArray=I;M.addItemsHeader=E}}this.SetProperty("TaskAdditionalItemMap",t)}var C=F.GetProperty("BranchStepIdArray");if(C){M.branchStepIdArray=C.split(",")}this.SetProperty("CurrentStepId",F.GetProperty("CurrentStep"));M.highlightStepAction=F.GetProperty("HighlightStepAction");this.SetProperty("TaskDetail",M)}function m(z,x){var t=this.Get("TaskMap");var u=t[x];if(u){var y=u.subTask;if(z===y.taskRowId){var v=CCFMiscUtil_CreatePropSet();var w=CCFMiscUtil_CreatePropSet();v.SetProperty("TaskName",y.taskName);this.ExecuteMethod("InvokeServiceMethod","StartTask",v,w,"Task UI Service (SWE)")
}}}function s(w){var u=this.Get("TaskDetail");if(!u.hasDoneStep){var v=CCFMiscUtil_CreatePropSet();var t=CCFMiscUtil_CreatePropSet();v.SetProperty("Step Num",w);if(this.ExecuteMethod("InvokeServiceMethod","DoNext",v,t)){t.SetProperty("ClearTask","FALSE");f.call(this,t)}}}function a(z){var v=this.Get("TaskDetail");var y=v.branchStepIdArray.length;if(y===0){return false}for(var t=0,x=Number(z);t<y;++t){if(x<=Number(v.branchStepIdArray[t])){v.hasDoneStep=false;this.SetProperty("CurrentStepId",z);var w=v.branchStepIdArray[t];var A=v.stepArray.length;for(var u=Number(w);u<A;++u){v.stepArray.pop()}for(var u=t;u<y;++u){v.branchStepIdArray.pop()}this.SetProperty("TaskDetail",v);return true}}return false}function c(t){this.SetProperty("CurrentStepId",t)}function e(){this.SetProperty("ClearCurrentStepControlsHighlight",true);var t=CCFMiscUtil_CreatePropSet();var u=CCFMiscUtil_CreatePropSet();if(this.ExecuteMethod("InvokeServiceMethod","Done",t,u)){d.call(this,u)}}function l(){var t=CCFMiscUtil_CreatePropSet();var u=CCFMiscUtil_CreatePropSet();if(this.ExecuteMethod("InvokeServiceMethod","LoadAllData",t,u)){g.call(this,u)}}return p}());return SiebelAppFacade.TaskAssistPlayerPM})};