/*<ORACLECOPYRIGHT>
* Copyright (C) 1994-2015 Oracle and/or its affiliates. All rights reserved.
* Oracle and Java are registered trademarks of Oracle and/or its affiliates.
* Other names may be trademarks of their respective owners.
* UNIX is a registered trademark of The Open Group.
*
* This software and related documentation are provided under a license agreement
* containing restrictions on use and disclosure and are protected by intellectual property laws.
* Except as expressly permitted in your license agreement or allowed by law, you may not use, copy,
* reproduce, translate, broadcast, modify, license, transmit, distribute, exhibit, perform, publish,
* or display any part, in any form, or by any means. Reverse engineering, disassembly,
* or decompilation of this software, unless required by law for interoperability, is prohibited.
*
* The information contained herein is subject to change without notice and is not warranted to be error-free.
* If you find any errors, please report them to us in writing.
*
* U.S. GOVERNMENT RIGHTS Programs, software, databases, and related documentation and technical data delivered to U.S.
* Government customers are "commercial computer software" or "commercial technical data" pursuant to the applicable
* Federal Acquisition Regulation and agency-specific supplemental regulations.
* As such, the use, duplication, disclosure, modification, and adaptation shall be subject to the restrictions and
* license terms set forth in the applicable Government contract, and, to the extent applicable by the terms of the
* Government contract, the additional rights set forth in FAR 52.227-19, Commercial Computer Software License
* (December 2007). Oracle America, Inc., 500 Oracle Parkway, Redwood City, CA 94065.
*
* This software or hardware is developed for general use in a variety of information management applications.
* It is not developed or intended for use in any inherently dangerous applications, including applications that
* may create a risk of personal injury. If you use this software or hardware in dangerous applications,
* then you shall be responsible to take all appropriate fail-safe, backup, redundancy,
* and other measures to ensure its safe use. Oracle Corporation and its affiliates disclaim any liability for any
* damages caused by use of this software or hardware in dangerous applications.
*
* This software or hardware and documentation may provide access to or information on content,
* products, and services from third parties. Oracle Corporation and its affiliates are not responsible for and
* expressly disclaim all warranties of any kind with respect to third-party content, products, and services.
* Oracle Corporation and its affiliates will not be responsible for any loss, costs,
* or damages incurred due to your access to or use of third-party content, products, or services.
</ORACLECOPYRIGHT>*/
/* 15.0.0.0SIA[23048] */
if(typeof(SiebelAppFacade.SearchLookinPresentationModel)==="undefined"){SiebelJS.Namespace("SiebelAppFacade.SearchLookinPresentationModel");define("siebel/searchLookinPModel",["siebel/pmodel"],function(){SiebelAppFacade.SearchLookinPresentationModel=(function(){var k=SiebelJS.Dependency("SiebelApp.Constants");var o=SiebelJS.Dependency("SiebelApp.Utils");var r="";var p="";var f="";var l="";var q=CCFMiscUtil_CreatePropSet();var g=CCFMiscUtil_CreatePropSet();var n=CCFMiscUtil_CreatePropSet();var j="";var m="";var e="false";var a="";var d="";var c="";var b="All";function h(s){SiebelAppFacade.SearchLookinPresentationModel.superclass.constructor.call(this,s)}SiebelJS.Extend(h,SiebelAppFacade.BasePM);h.prototype.Init=function(){this.AddProperty("GetContainer","s_srch");this.AddProperty("GetTitle","srch");this.AddProperty("GetSearchOutput","");this.AddProperty("GetSearchOutputFromAdvSearch","");this.AddProperty("GetAdvSearchOutputForCategory","");this.AddProperty("GetAdvSearchOutputForDataSource","");this.AddProperty("GetAdvSearchOutputForFileFormat","");this.AddProperty("GetSearchPrefOutputForSort","");this.AddProperty("GetSearchPrefOutputForPage","");this.AddProperty("GetSearchPrefOutputForQueryLang","");this.AddProperty("GetSearchPrefOutputForDocLang","");this.AddProperty("ShowSearchResultsDialog","");this.AddProperty("ShowSearchResultsDialogFromAdvSearch","");this.AddProperty("showAdvancedSearchPopup","");this.AddProperty("showAdvancedFindPopup","");this.AddProperty("showSearchPreferencePopup","");this.AddProperty("fillLookin","");this.AddProperty("SetLookinInput","");this.AddProperty("SetLookinInputFind","");this.AddProperty("SetLookinCategory","");this.AddProperty("SetLookinOther","");this.AddProperty("Freetext","");this.AddProperty("BCType","");this.AddProperty("Collection","");this.AddProperty("Fileformat","");this.AddProperty("SearchType","");this.AddProperty("Contains AND","");this.AddProperty("Contains NOT","");this.AddProperty("Contains EXACT","");this.AddProperty("Contains OR","");this.AddProperty("SEARCH_PER_PAGE","");this.AddProperty("SEARCH_SORT","");this.AddProperty("SearchResultSamePage","");this.AddProperty("DS","");this.AddProperty("GetSearchError","");this.AddProperty("Sort","");this.AddProperty("NumDataSource","");this.AddProperty("DataSource","");this.AddProperty("OpenSearchPanel","");this.AddProperty("InProp","");this.AddProperty("OutProp","");this.AddProperty("isBarcodeEnabled");this.AddProperty("showBarcodePopup","");this.AddProperty("BarcodeProcessMode","");this.AddProperty("EnableNewRecordFeature","");this.AddMethod("ExposedOpenSearchPanel",s);this.AddMethod("ExposedCurrentFind",t);this.AddMethod("InvokeServiceMethod",function(G,ab,K){var ad=SiebelApp.S_App.GetService("Invoke Search");if(ad){var S=0;var P=0;var Q=0;var N=[];var z=[];var I=[];var J=[];var w=[];var B=[];var aa=[];var L=[];var E=[];var U;if(SiebelApp.S_App.GetOfflineMode&&SiebelApp.S_App.GetOfflineMode()){ad.InvokeMethod("GetOUISearchLookinValues",ab);$.callback(this,function(af){K=af.retVal;var ae=K.GetChildCount();for(S=0;S<ae;S++){var x=K.GetChild(S);if(x){if(x.GetType()==="ResultSet"){b=x.GetProperty("Output");L=o.TokenizeString(b,",");this.SetProperty("SetLookinInputBarcode",L);this.SetProperty("isBarcodeEnabled",true);this.SetProperty("fillLookin",true)}}}})}else{K=ad.InvokeMethod("GetOUISearchLookinValues",ab);var T=K.GetChildCount();for(S=0;S<T;S++){var O=K.GetChild(S);if(O){if(O.GetType()==="ResultSet"){b=O.GetProperty("defaultFind");var A=O.GetProperty("isBarcodeEnabled");var X="";var H="";var v=O.GetPropertyCount();U=O.GetProperty("OPTIONS_LENGTH");for(Q=0;Q<U;Q++){X="OPTION"+Q;H="FIELD"+Q;L.push(O.GetProperty(X));E.push(O.GetProperty(H))}}var R=0;var y;var Z;var V;var Y;var C=O.GetChildCount();for(R=0;R<C;R++){V=O.GetChild(R);Z=V.GetPropertyCount();Y=V.GetType();if(Y==="CategoryType"){for(y in V.propArray){if(V.propArray.hasOwnProperty(y)){I.push(y)}}}else{if(Y==="AllType"){for(y in V.propArray){if(V.propArray.hasOwnProperty(y)){N.push(y)}}}else{if(Y==="ParentType"){for(y in V.propArray){if(V.propArray.hasOwnProperty(y)){B.push(y)}}}else{if(Y==="DataSrcType"){for(y in V.propArray){if(V.propArray.hasOwnProperty(y)){w.push(y);q.SetProperty("DS"+P,y);n.SetProperty(y,V.propArray[y]);aa.push(V.propArray[y]);P++}}}else{if(Y==="FindType"){var u=V.GetChildCount();var F=0;for(F=0;F<u;F++){var W=V.GetChild(F);for(y in W.propArray){if(W.propArray.hasOwnProperty(y)){J.push(y);g.SetProperty(y,W.propArray[y])}}}}}}}}}}}var D=0;var ac="";var M=z.length;this.SetProperty("DefaultFindCategory",b);this.SetProperty("isBarcodeEnabled",A);this.SetProperty("SetLookinInput",N);this.SetProperty("SetLookinInputFind",J);this.SetProperty("SetLookinInputCategory",I);this.SetProperty("SetLookinInputOther",w);this.SetProperty("SetLookinParentCategory",B);this.SetProperty("SetLookupDS",aa);this.SetProperty("SetLookinInputBarcode",L);this.SetProperty("SetLookinInputBarcodeField",E);this.SetProperty("fillLookin",true)}}});this.AttachEventHandler("OnLoadSearch",function(){var v=CCFMiscUtil_CreatePropSet();var u=CCFMiscUtil_CreatePropSet();this.ExecuteMethod("InvokeServiceMethod","GetOUISearchLookinValues",v,u)});this.AttachEventHandler("OnExecuteSearch",function(){var N=0;var H=0;var J="";var K="";var I=[];var B=CCFMiscUtil_CreatePropSet();var G=CCFMiscUtil_CreatePropSet();var x=this.Get("SearchType");var A=this.Get("BCType");B.SetProperty("Sort",m);B.SetProperty("From","0");B.SetProperty("SubOperation","");if(SiebelApp.S_App.GetActiveView()){var v=SiebelApp.S_App.GetActiveView().GetName();if(v===f){B.SetProperty("SearchResultSamePage",true)}}if(x==="BASIC"){var L=this.Get("Freetext");B.SetProperty("Freetext",L);if(q.GetPropertyCount()>0){for(N=0;N<q.GetPropertyCount();N++){var w=q.GetProperty("DS"+N);if(typeof(w)!=="undefined"){J=n.GetProperty(w);var E="1#"+w.length+"#"+w;if(E===A){B.SetProperty("BCType","");B.SetProperty("Collection","1#"+J.length+"#"+J);break}else{B.SetProperty("BCType",A);B.SetProperty("Collection","1#7#buscomp");B.SetProperty("LookinValues",A)}}}}else{B.SetProperty("BCType",A);B.SetProperty("Collection","1#7#buscomp");B.SetProperty("LookinValues",A)}B.SetProperty("ContainsANDtext","");B.SetProperty("ContainsNOTtext","");B.SetProperty("ContainsEXACTtext","");B.SetProperty("ContainsORtext","")}else{if(x==="ADVANCED"){for(H=0;H<this.Get("NumDataSource");H++){if(this.Get("DataSource"+H)==="buscomp"){I[H]="buscomp"}else{I[H]=n.GetProperty(this.Get("DataSource"+H))}}if(I.length>0){K=o.SearchUtil_ArrayToString(I)}B.SetProperty("ContainsANDtext",this.Get("Contains AND"));B.SetProperty("ContainsNOTtext",this.Get("Contains NOT"));B.SetProperty("ContainsEXACTtext",this.Get("Contains EXACT"));B.SetProperty("ContainsORtext",this.Get("Contains OR"));B.SetProperty("Fileformat",this.Get("Fileformat"));B.SetProperty("BCType",A);B.SetProperty("Freetext","");B.SetProperty("Collection",K);B.SetProperty("LookinValues",A)}else{if(x==="FIND"){var L=this.Get("SearchText");r=g.GetProperty(A);p="1#"+r.length+"#"+r;
B.SetProperty("SearchText",L);B.SetProperty("Category",p);B.SetProperty("BasicCategory",r);B.SetProperty("FindFields",this.Get("findFieldString"))}else{if(x==="ADVANCEDFIND"){p="1#"+r.length+"#"+r;var L=this.Get("SearchText");B.SetProperty("SearchText",L);B.SetProperty("Category",p);B.SetProperty("BasicCategory",r);B.SetProperty("FindFields",d)}else{if(x==="BARCODE"){B.SetProperty("BARCODE",this.Get("SearchText"));B.SetProperty("OPTION",this.Get("BCType"))}}}}}var T=SiebelApp.S_App.GetService("Invoke Search");if(!T){return}if(x==="FIND"||x==="ADVANCEDFIND"){if(SiebelApp.S_App.GetActiveView()){var v=SiebelApp.S_App.GetActiveView().GetName();if(v===l){B.SetProperty("FindResultSamePage",true)}}G=T.InvokeMethod("OUIFind",B);if(G.GetProperty("Status")!=="Error"){var D=G.GetChild(0);if(D){this.SetProperty("EnableNewRecordFeature",G.GetChild(0).GetChild(0).GetProperty("EnableNewRecordFeature"));l=G.GetChild(0).GetChild(0).GetProperty("GotoOUIFindResultsView");SiebelApp.S_App.GotoView(l)}}}else{if(x==="BARCODE"){if(SiebelApp.S_App.GetOfflineMode&&SiebelApp.S_App.GetOfflineMode()){T.InvokeMethod("BarcodeQuery",B)}else{G=T.InvokeMethod("BarcodeQuery",B)}}else{G=T.InvokeMethod("Search",B);var F=CCFMiscUtil_CreatePropSet();var P=0;var z;F.SetType("Result");var R=G.GetChildCount();f=G.GetChild(0).GetProperty("GotoOUIResultsView");if(G.GetChild(0).GetType()==="ResultSet"){var Q=G.GetChild(0).GetProperty("AltWords");if(typeof(Q)==="undefined"){F.SetProperty("AltWords","")}else{F.SetProperty("AltWords",Q)}}for(P=0;P<R;P++){var M=G.GetChild(P);if(M){if(M.GetType()==="ResultSet"){var O=0;var C=M.GetChildCount();for(O=0;O<C;O++){var S=M.GetChild(O);if(S){var y=CCFMiscUtil_CreatePropSet();y.SetProperty("DataSource",S.GetProperty("DataSource"));y.SetProperty("Date",S.GetProperty("Date"));y.SetProperty("Title",S.GetProperty("Title"));y.SetProperty("Summary",S.GetProperty("Summary"));F.AddChild(y)}}}else{if(M.GetType()==="Errors"){var S=M.GetChild(0);z=S.GetProperty("ErrMsg")}}}}}}if(x==="BASIC"){this.SetProperty("GetSearchOutput",F);this.SetProperty("GetSearchError",z);this.SetProperty("ShowSearchResultsDialog",true)}else{if(x==="ADVANCED"){this.SetProperty("GetSearchOutputFromAdvSearch",F);this.SetProperty("GetSearchError",z);this.SetProperty("ShowSearchResultsDialogFromAdvSearch",true)}}});this.AttachEventHandler("OnExecuteShowAllSearchResults",function(){SiebelApp.S_App.GotoView(f)});this.AttachEventHandler("OnExecuteAdvancedSearch",function(){var u=CCFMiscUtil_CreatePropSet();var D=CCFMiscUtil_CreatePropSet();u.SetProperty("Freetext",this.Get("Freetext"));u.SetProperty("BCType",this.Get("BCType"));u.SetProperty("Collection","1#7#buscomp");u.SetProperty("LookinValues",this.Get("BCType"));var A=SiebelApp.S_App.GetService("Invoke Search");if(!A){return}D=A.InvokeMethod("Search",u);var v=CCFMiscUtil_CreatePropSet();v.SetType("Result");var z=0;for(z=0;z<D.GetChildCount();z++){var w=0;var C=D.GetChild(z);if(C){var x=C.GetChildCount();for(w=0;w<x;w++){var B=C.GetChild(w);if(B){var y=CCFMiscUtil_CreatePropSet();y.SetProperty("DataSource",B.GetProperty("DataSource"));y.SetProperty("Date",B.GetProperty("Date"));y.SetProperty("Title",B.GetProperty("Title"));y.SetProperty("Summary",B.GetProperty("Summary"));v.AddChild(y)}}}}this.SetProperty("GetSearchOutputFromAdvSearch",v);this.SetProperty("ShowSearchResultsDialogFromAdvSearch",true)});this.AttachEventHandler("OnLoadAdvancedSearch",function(){var v=CCFMiscUtil_CreatePropSet();var D=CCFMiscUtil_CreatePropSet();var C=SiebelApp.S_App.GetService("Invoke Search");if(C){var A=0;var y=[];var G=[];D=C.InvokeMethod("GetOUISearchLookinValues",v);var z=D.GetChildCount();for(A=0;A<z;A++){var F=D.GetChild(A);if(F){var x=0;var u="";var H;var E;var B;var w=F.GetChildCount();for(x=0;x<w;x++){E=F.GetChild(x);B=E.GetType();if(B==="CategoryType"){for(u in E.propArray){if(E.propArray.hasOwnProperty(u)){y.push(u)}}}else{if(B==="DataSrcType"){for(u in E.propArray){if(E.propArray.hasOwnProperty(u)){G.push(u)}}}}}}}var I=[];D=C.InvokeMethod("GetFileFormatLOVValues",v);for(A=0;A<z;A++){var F=D.GetChild(A);if(F){var x=0;var H=F.GetPropertyCount();if(F.GetType()==="ResultSet"){for(x=0;x<H;x++){I.push(F.GetProperty("Search File Format"+x))}}}}this.SetProperty("GetAdvSearchOutputForCategory",y);this.SetProperty("GetAdvSearchOutputForFileFormat",I);this.SetProperty("GetAdvSearchOutputForDataSource",G);this.SetProperty("showAdvancedSearchPopup",true)}});this.AttachEventHandler("OnLoadAdvancedFind",function(D,G,E){var K=CCFMiscUtil_CreatePropSet();var y=CCFMiscUtil_CreatePropSet();r=g.GetProperty(D);var L=SiebelApp.S_App.GetService("Invoke Search");if(L){var F=0;var C=0;var B=[];var w=[];var u=[];var H=[];var x=[];var A;K.SetProperty("Category",r);y=L.InvokeMethod("GetOUIFindFields",K);var v=y.GetChild(0);if(v){var J=v.GetPropertyCount();for(F=0;F<J/3;F++){if(v.GetType()==="ResultSet"){var I=v.GetProperty("FindField"+F);var z=v.GetProperty("FindFieldDisp"+F);A=v.GetProperty("FindFieldDispInEntry"+F);if(A==="true"){x.push(z);H.push(I)}}}}d=o.SearchUtil_ArrayToString(H);c=o.SearchUtil_ArrayToString(x);this.SetProperty("findSelectedCategory",r);this.SetProperty("GetAdvFindOutputForFindFields",H);this.SetProperty("GetAdvFindOutputForFindDisplayFields",x);this.SetProperty("BarcodeProcessMode",E);if(G==="true"){this.SetProperty("showBarcodePopup",true)}else{this.SetProperty("showAdvancedFindPopup",true)}}});this.AttachEventHandler("OnLoadAdvancedBarcode",function(y,C,G){var u=CCFMiscUtil_CreatePropSet();var E=CCFMiscUtil_CreatePropSet();r=g.GetProperty(y);var D=SiebelApp.S_App.GetService("Invoke Search");if(D){var B=0;var z=0;var A=[];var F=[];var J=[];var I=[];var K=[];u.SetProperty("Category",r);E=D.InvokeMethod("GetOUIFindFields",u);var v=E.GetChild(0);if(v){var H=v.GetPropertyCount();for(B=0;B<H/2;B++){if(v.GetType()==="ResultSet"){var w=v.GetProperty("FindField"+B);var x=v.GetProperty("FindFieldDisp"+B);K.push(x);I.push(w)}}}d=o.SearchUtil_ArrayToString(I);c=o.SearchUtil_ArrayToString(K);this.SetProperty("findSelectedCategory",r);this.SetProperty("GetAdvFindOutputForFindFields",I);this.SetProperty("GetAdvFindOutputForFindDisplayFields",K);this.SetProperty("BarcodeProcessMode",G);if(C==="true"){this.SetProperty("showBarcodePopup",true)}else{this.SetProperty("showAdvancedFindPopup",true)}}});this.AttachEventHandler("OnLoadSearchPreference",function(){var u=CCFMiscUtil_CreatePropSet();var D=CCFMiscUtil_CreatePropSet();var B=SiebelApp.S_App.GetService("Invoke Search");if(B){var C=[];var z=[];var A=[];var w;var E=0;var v=0;var H=0;D=B.InvokeMethod("GetSearchSettingValues",u);var y=D.GetChildCount();for(i=0;i<y;i++){var F=D.GetChild(i);if(F){var x=0;var G=F.GetPropertyCount();if(F.GetType()==="ResultSet"){for(x=0;x<G;x++){if(F.GetProperty("Search Per Page"+E)){C.push(F.GetProperty("Search Per Page"+E));++E}else{if(F.GetProperty("Search Sort"+v)){z.push(F.GetProperty("Search Sort"+v));++v}else{if(F.GetProperty("Search Query Lang"+H)){A.push(F.GetProperty("Search Query Lang"+H));++H}else{if(F.GetProperty("Doc Language")){e=F.GetProperty("Doc Language")
}}}}}}}}this.SetProperty("GetSearchPrefOutputForSort",z);this.SetProperty("GetSearchPrefOutputForPage",C);this.SetProperty("GetSearchPrefOutputForQueryLang",A);this.SetProperty("GetSearchPrefOutputForDocLang",e);this.SetProperty("showSearchPreferencePopup",true)}});this.AttachEventHandler("OnExecuteSavePreference",function(){var w=CCFMiscUtil_CreatePropSet();var v=CCFMiscUtil_CreatePropSet();w.SetProperty("SEARCH_PER_PAGE",this.Get("SEARCH_PER_PAGE"));w.SetProperty("SEARCH_SORT",this.Get("SEARCH_SORT"));w.SetProperty("SEARCH_LANGUAGE",this.Get("SEARCH_LANGUAGE"));w.SetProperty("DOC_LANGUAGE",this.Get("DOC_LANGUAGE"));j=this.Get("SEARCH_PER_PAGE");m=this.Get("SEARCH_SORT");a=this.Get("SEARCH_LANGUAGE");e=this.Get("DOC_LANGUAGE");var u=SiebelApp.S_App.GetService("Invoke Search");if(!u){return}v=u.InvokeMethod("SaveSearchPreference",w)});function s(v,u){this.SetProperty("InProp",v);this.SetProperty("OutProp",u);this.SetProperty("OpenSearchPanel",true)}function t(x){var w=this.Get("findSelectedCategory");var v=CCFMiscUtil_CreatePropSet();x.SetProperty("SearchText",this.Get("SearchText"));x.SetProperty("BasicCategory",w);x.SetProperty("Category","1#"+w.length+"#"+w);x.SetProperty("FindFields",o.SearchUtil_ArrayToString(this.Get("GetAdvFindOutputForFindFields")));x.SetProperty("EnableNewRecordFeature",this.Get("EnableNewRecordFeature"));var u=SiebelApp.S_App.GetService("Invoke Search");if(!u){return}v=u.InvokeMethod("OUIFindNewRecord",x)}};return h}());return"SiebelAppFacade.SearchLookinPresentationModel"})};